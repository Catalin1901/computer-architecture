"use strict";(self.webpackChunkcomputer_architecture=self.webpackChunkcomputer_architecture||[]).push([[2169],{5680:(e,a,r)=>{r.d(a,{xA:()=>s,yg:()=>g});var i=r(6540);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function t(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?t(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function o(e,a){if(null==e)return{};var r,i,n=function(e,a){if(null==e)return{};var r,i,n={},t=Object.keys(e);for(i=0;i<t.length;i++)r=t[i],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(i=0;i<t.length;i++)r=t[i],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=i.createContext({}),u=function(e){var a=i.useContext(c),r=a;return e&&(r="function"==typeof e?e(a):l(l({},a),e)),r},s=function(e){var a=u(e.components);return i.createElement(c.Provider,{value:a},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return i.createElement(i.Fragment,{},a)}},m=i.forwardRef((function(e,a){var r=e.components,n=e.mdxType,t=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),d=u(r),m=n,g=d["".concat(c,".").concat(m)]||d[m]||p[m]||t;return r?i.createElement(g,l(l({ref:a},s),{},{components:r})):i.createElement(g,l({ref:a},s))}));function g(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var t=r.length,l=new Array(t);l[0]=m;var o={};for(var c in a)hasOwnProperty.call(a,c)&&(o[c]=a[c]);o.originalType=e,o[d]="string"==typeof e?e:n,l[1]=o;for(var u=2;u<t;u++)l[u]=r[u];return i.createElement.apply(null,l)}return i.createElement.apply(null,r)}m.displayName="MDXCreateElement"},8096:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>u});var i=r(8168),n=(r(6540),r(5680));const t={},l="Utilizare imagine docker Linux",o={unversionedId:"Tutoriale/Docker/Linux/README",id:"Tutoriale/Docker/Linux/README",title:"Utilizare imagine docker Linux",description:"Cerin\u021be necesare",source:"@site/docs/Tutoriale/Docker/Linux/README.md",sourceDirName:"Tutoriale/Docker/Linux",slug:"/Tutoriale/Docker/Linux/",permalink:"/computer-architecture/Tutoriale/Docker/Linux/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Utilizare imagine docker Windows",permalink:"/computer-architecture/Tutoriale/Docker/Windows/"},next:{title:"Laboratoare",permalink:"/computer-architecture/Laboratoare/"}},c={},u=[{value:"Cerin\u021be necesare",id:"cerin\u021be-necesare",level:2},{value:"Rulare",id:"rulare",level:2},{value:"Op\u021biunea 1 din Visual Studio Code",id:"op\u021biunea-1-din-visual-studio-code",level:3},{value:"Op\u021biunea 2 prin docker",id:"op\u021biunea-2-prin-docker",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Primesc eroare cand scriu in shell <code>vivado</code>/nu apare GUI-ul",id:"primesc-eroare-cand-scriu-in-shell-vivadonu-apare-gui-ul",level:3},{value:"Devcontainer fara GUI",id:"devcontainer-fara-gui",level:4},{value:"Setup manual de docker fara GUI",id:"setup-manual-de-docker-fara-gui",level:4},{value:"Am wayland. Ce fac?",id:"am-wayland-ce-fac",level:3},{value:"Am ecran alb cand deschid cu wayland",id:"am-ecran-alb-cand-deschid-cu-wayland",level:3},{value:"Stuck la deschiderea hardware managerului",id:"stuck-la-deschiderea-hardware-managerului",level:3}],s={toc:u},d="wrapper";function p(e){let{components:a,...r}=e;return(0,n.yg)(d,(0,i.A)({},s,r,{components:a,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"utilizare-imagine-docker-linux"},"Utilizare imagine docker Linux"),(0,n.yg)("h2",{id:"cerin\u021be-necesare"},"Cerin\u021be necesare"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Sa aveti VSCode instalat"),(0,n.yg)("li",{parentName:"ol"},"Sa aveti un Desktop Environment sau un Window manager ce ruleaza cu X Server."),(0,n.yg)("li",{parentName:"ol"},"Sa aveti Docker CE instalat (Atentie, nu docker desktop! O sa trebuiasca privileged execution pentru a forwarda folderul /dev iar acesta face acest lucru foarte enervant si dificil)",(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://docs.docker.com/engine/install/"},"Ubuntu/Fedora")),(0,n.yg)("li",{parentName:"ul"},"Arch: ",(0,n.yg)("inlineCode",{parentName:"li"},"sudo pacman -S docker"),(0,n.yg)("ul",{parentName:"li"},(0,n.yg)("li",{parentName:"ul"},"Daca aveti deja docker desktop instalat de pe AUR o sa va apara conflicte. Va apar frumos acolo pachetele conflictuale, e alegerea voastra what comes next.")))))),(0,n.yg)("h2",{id:"rulare"},"Rulare"),(0,n.yg)("h3",{id:"op\u021biunea-1-din-visual-studio-code"},"Op\u021biunea 1 din Visual Studio Code"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Deschide\u021bi directorul repo-ului \xeen Visual Studio Code.")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"code computer-architecture\n")),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"Instala\u021bi extensia ",(0,n.yg)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers"},"Dev Containers"),".")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},'Dup\u0103 ve\u021bi avea op\u021biunea "Dev Containers: Reopen in container" (',(0,n.yg)("inlineCode",{parentName:"p"},"CTRL+SHIFT+P"),")."))),(0,n.yg)("h3",{id:"op\u021biunea-2-prin-docker"},"Op\u021biunea 2 prin docker"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Desc\u0103rca\u021bi imaginea cu docker")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"docker pull gitlab.cs.pub.ro:5050/ac/ac-public/vivado-slim:1.0.0\n")),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},"Rula\u021bi un container cu imaginea")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -it -v /dev:/dev gitlab.cs.pub.ro:5050/ac/ac-public/vivado-slim:1.0.0 /bin/bash\n")),(0,n.yg)("ol",{start:3},(0,n.yg)("li",{parentName:"ol"},"Rula\u021bi vivado din imagine")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"vivado\n")),(0,n.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,n.yg)("h3",{id:"primesc-eroare-cand-scriu-in-shell-vivadonu-apare-gui-ul"},"Primesc eroare cand scriu in shell ",(0,n.yg)("inlineCode",{parentName:"h3"},"vivado"),"/nu apare GUI-ul"),(0,n.yg)("p",null,"Inainte de a rula urmatoarele solutii, ",(0,n.yg)("strong",{parentName:"p"},"asigurati-va inainte ca .devcontainer/{sshd_config,Dockerfile,devcontainer.json} respecta cerintele de securitate impuse de voi"),". Urmatoarea metoda o sa expuna un port la ssh pe un container privilegiat neparolat care are expus /dev-ul vostru. Asigurati-va ca nu exista posibilitatea ca o masina remote sa se poata conecta la acel port al vostru, sau modificati sshd_config-ul astfel incat sa respecte cerintele de securitate, sau schimbati parola de root (in dockerfile)"),(0,n.yg)("h4",{id:"devcontainer-fara-gui"},"Devcontainer fara GUI"),(0,n.yg)("p",null,"Va trebui sa editati devcontainer.json (aveti comentate deja liniile necesare, decomentati image) ca sa va apara in felul acesta:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Vivado Slim Dev",\n    "build": { "dockerfile": "Dockerfile" },\n    // "image": "gitlab.cs.pub.ro:5050/ac/ac-public/vivado-slim:1.0.0",\n    "runArgs": [\n        "--rm",\n        "--privileged"\n    ],\n    "appPort": "2222:22",\n    "mounts": ["type=bind,source=/dev,target=/dev"],\n    //"otherPortsAttributes": {"requireLocalPort": "true", "elevateIfNeeded" : "true"},\n    "postStartCommand": "/usr/local/sbin/sshd",\n    "customizations": {\n        "vscode": {\n            "extensions": [\n                "mshr-h.veriloghdl"\n            ]\n        }\n    }\n}\n')),(0,n.yg)("p",null,"Dupa apasati ",(0,n.yg)("inlineCode",{parentName:"p"},"Ctrl+Shift+P")," si apasati pe ",(0,n.yg)("inlineCode",{parentName:"p"},"Dev Containers: Rebuild and Reopen in Container"),"."),(0,n.yg)("p",null,"Pentru a putea accesa gui-ul deschideti un terminal (nu acela de pe vscode) si scrieti ",(0,n.yg)("inlineCode",{parentName:"p"},"ssh -XY -p 2222 root@localhost"),". Nu va trebui sa introduceti nicio parola. Puteti modifica portul cu ce doriti voi atata timp cat modificati acest lucru si in devcontainer.json la appPort."),(0,n.yg)("h4",{id:"setup-manual-de-docker-fara-gui"},"Setup manual de docker fara GUI"),(0,n.yg)("p",null,"In radacina proiectului computer-architecture executati"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"cd .devcontainer\ndocker build -t vivado-slim-sshx .\ncd ..\ndocker run -it -v /dev:/dev -p 2222:22 -v $PWD:/workspaces/computer-architecture vivado-slim-sshx\n")),(0,n.yg)("h3",{id:"am-wayland-ce-fac"},"Am wayland. Ce fac?"),(0,n.yg)("p",null,"Va trebui sa faci ",(0,n.yg)("a",{parentName:"p",href:"#primesc-eroare-cand-scriu-in-shell-vivadonu-apare-gui-ul"},"pasul asta"),"."),(0,n.yg)("p",null,"Exista 2 optiuni rapide:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Instaleaza Xwayland si urmeaza setup-ul/configurarea pentru DE-ul/WM-ul tau"),(0,n.yg)("li",{parentName:"ol"},"Instaleaxa Xephyr si foloseste comanda aceasta: ",(0,n.yg)("inlineCode",{parentName:"li"},"Xephyr -br -ac -noreset -screen 1920x1080 :1"),". Inlocuieste 1920x1080 cu rezolutia folosita de tine, o sa se deschida o fereastra. Dupa scrii ",(0,n.yg)("inlineCode",{parentName:"li"},"DISPLAY=:1 ssh -X -p 2222 root@localhost"),". Gui-ul de la vivado va aparea in fereastra de tocmai s-a deschis")),(0,n.yg)("p",null,"Mai multe detalii ",(0,n.yg)("a",{parentName:"p",href:"https://www.dbts-analytics.com/notesxfwdgb.html"},"aici")),(0,n.yg)("h3",{id:"am-ecran-alb-cand-deschid-cu-wayland"},"Am ecran alb cand deschid cu wayland"),(0,n.yg)("p",null,"scrie in shell inainte sa executi vivado ",(0,n.yg)("inlineCode",{parentName:"p"},"export _JAVA_AWT_WM_NONREPARENTING=1"),". Sau decomenteaza linia din Dockerfile care da echo la aceasta linie in .bashrc"),(0,n.yg)("h3",{id:"stuck-la-deschiderea-hardware-managerului"},"Stuck la deschiderea hardware managerului"),(0,n.yg)("p",null,"In terminalul din vscode scrie ",(0,n.yg)("inlineCode",{parentName:"p"},"hw_server"),", daca o sa functioneze o sa apare cv gen"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"****** Xilinx hw_server v2022.1\n  **** Build date : Apr 18 2022 at 16:10:30\n    ** Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.\n\nINFO: hw_server application started\nINFO: Use Ctrl-C to exit hw_server application\n\nINFO: To connect to this hw_server instance use url: TCP:ba86b6047b8c:3121\n")),(0,n.yg)("p",null,"Copiati ce este intre TCP: si :3121 si folositi-l ca 'url' la conexiune remote"))}p.isMDXComponent=!0}}]);